<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Créer un Quiz</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h1>Créer ton Quiz</h1>
    <form id="quiz-form">
      <label><b>Ton nom (créateur du quiz) :</b></label>
      <input type="text" name="creator" required placeholder="Ton prénom ou pseudo" style="width:100%;margin-bottom:16px;">
      <div id="questions-container"></div>
      <button type="submit" id="generate-link">Générer le lien du quiz</button>
    </form>
    <div id="quiz-link" style="margin-top:20px;"></div>
  </div>
  <script>
    const questions = [
      { q: "Quelle boisson préfères-tu ?", options: ["Eau", "Jus de fruit", "Soda", "Thé"] },
      { q: "Tu préfères les frites ou l'alloco ?", options: ["Frites", "Alloco", "Riz", "Attiéké"] },
      { q: "Quel animal préfères-tu ?", options: ["Chien", "Chat", "Oiseau", "Poisson"] },
      { q: "Quel sport aimes-tu le plus ?", options: ["Football", "Basketball", "Tennis", "Natation"] },
      { q: "Quel est ton dessert favori ?", options: ["Glace", "Gâteau", "Fruit", "Crêpe"] },
      { q: "Quelle saison préfères-tu ?", options: ["Printemps", "Été", "Automne", "Hiver"] },
      { q: "Tu préfères le matin ou le soir ?", options: ["Matin", "Soir", "Peu importe", "Aucun"] },
      { q: "Quel super-pouvoir aimerais-tu avoir ?", options: ["Voler", "Invisibilité", "Téléportation", "Lire dans les pensées"] },
      { q: "Quel fruit préfères-tu ?", options: ["Mangue", "Banane", "Orange", "Pomme"] },
      { q: "Quel genre de musique préfères-tu ?", options: ["Rap", "Pop", "Classique", "Reggae"] }
    ];
    const questionsContainer = document.getElementById('questions-container');
    questions.forEach((q, i) => {
      let html = `<div class='question-block'><label>${i+1}. ${q.q}</label><br>`;
      q.options.forEach((opt, j) => {
        html += `<label style='display:block;margin-bottom:4px;'><input type='radio' name='q${i}' value='${j}' required> ${opt}</label>`;
      });
      html += `</div>`;
      questionsContainer.innerHTML += html;
    });
    document.getElementById('quiz-form').onsubmit = function(e) {
      e.preventDefault();
      const data = new FormData(this);
      let quiz = [];
      for(let i=0; i<questions.length; i++) {
        let q = questions[i].q;
        let answers = questions[i].options;
        let correct = parseInt(data.get(`q${i}`));
        quiz.push({question:q,answers:answers,correct:correct});
      }
      const creator = data.get('creator') || '';
      const payload = {creator, quiz};
      const encoded = encodeURIComponent(btoa(JSON.stringify(payload)));
      const url = `${window.location.origin}${window.location.pathname.replace('create.html','index.html')}?quiz=${encoded}`;
      document.getElementById('quiz-link').innerHTML = `<b>Partage ce lien :</b><br><input style='width:100%' value='${url}' readonly onclick='this.select()'>`;
    }
  </script>
</body>
</html>
